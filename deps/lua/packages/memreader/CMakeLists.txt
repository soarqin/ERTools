cmake_minimum_required(VERSION 3.5)
project(MemReaderModule C)

if (UNIX OR CMAKE_HOST_UNIX)
  find_library(Psapi NAMES psapi)
  find_library(Version NAMES version)
else()
  set(Psapi "Psapi")
  set(Version "Version")
endif()
file(GLOB src src/*.h src/*.c src/*.def)
add_library(memreader STATIC ${src})
if(NOT MSVC)
  target_compile_options(memreader PRIVATE -fPIC)
endif()
target_link_libraries(memreader liblua_static ${Psapi} ${Version})
set_target_properties(memreader PROPERTIES PREFIX "")
